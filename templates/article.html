<!-- templates/article.html -->
{% extends "layout.html" %}
{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<div class="card shadow-sm">
  <div class="card-body">
    <h1 class="h4">{{ article.title }}</h1>
    <div class="text-muted small mb-3">{{ article.source }} • {{ article.published or '' }} • fetched {{ article.fetched_at }}</div>
    <div class="mb-3">
      {% if article.summary %}
        <div class="card p-3 mb-2"><pre style="white-space:pre-wrap;border:none;background:transparent;padding:0;margin:0;">{{ article.summary }}</pre></div>
      {% else %}
        <p class="text-muted">No summary saved yet.</p>
      {% endif %}
    </div>

    <div class="d-flex gap-2">
      <a href="{{ article.url }}" target="_blank" class="btn btn-primary"><i class="bi bi-box-arrow-up-right"></i> Open Original</a>

      <form method="post" action="{{ url_for('article_fetch_full', article_id=article.id) }}">
        <button type="submit" class="btn btn-outline-secondary">Fetch full text &amp; save</button>
      </form>

      <a href="{{ url_for('index') }}" class="btn btn-link ms-auto">Back</a>
    </div>
  </div>
</div>
{% endblock %}

